<section class="admin_panel_table_main_container">

    <h2 class="title"> Productos </h2>
    <h4 class="subtitle">Lista de todosas los productos de Sector 7</h4>

    @if(products$ && products$.length > 0){
        <table>
            <thead>
                <tr>
                    <td>
                        Nombre
                    </td>
                    <td>
                        precio
                    </td>
                    <td>
                        stock
                    </td>
                    <td>
                        Acciones
                    </td>
                </tr>
            </thead>
            <tbody>
                @for(product of products$ ; track product.id){
                <tr>
                    <td>
                        {{product.title}}
                    </td>
                    <td>
                        {{product.price | currency}}
                    </td>
                    <td>
                        {{product.stock}}
                    </td>
                    
                    <td class="actions_buttons_container">
                        <button class="actions_button update_button">
                            <mat-icon>edit</mat-icon>
                        </button>
                        <button class="actions_button delete_button" (click)="deleteProduct(product.id)" >
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    
        <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
        </mat-paginator>
    }
    @else {
        <app-input-danger-text text="No hay productos"></app-input-danger-text>
    }

    @if (productDeletedSuccessfully) {
        <app-message-pop-up  custom_message='Producto Creado Exitosamente' (close)="closeModal('productDeletedSuccessfully')" > </app-message-pop-up>
    }
    @if (productDeletionFailed) {
        <!-- <app-message-pop-up  custom_message='Ocurrio un error, intentelo nuevamente' (close)="closeModal('productHasError')" > </app-message-pop-up> -->
        <app-message-pop-up  custom_message='{{errorMessage}}' (close)="closeModal('productDeletionFailed')" > </app-message-pop-up>
    }
</section>